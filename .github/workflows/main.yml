name: GitHub Actions 發送 LINE 群組訊息

on:
  schedule:
    - cron: '45 9 * * 1-5'  # 每週一至週五台灣時間 17:45
  workflow_dispatch:

jobs:
  push-to-line:
    runs-on: ubuntu-latest
    steps:
      - name: 發送訊息到 LINE
        env:
          LINE_TOKEN: ${{ secrets.LINE_TOKEN }}
          GROUP_ID: ${{ secrets.GROUP_ID }}
        run: |
          python3 -c "
import requests
headers = {
    'Authorization': f'Bearer {os.environ['LINE_TOKEN']}',
    'Content-Type': 'application/json'
}
payload = {
    'to': os.environ['GROUP_ID'],
    'messages': [{'type': 'text', 'text': '✅ GitHub Actions 傳送的下班提醒訊息 🎉'}]
}
res = requests.post('https://api.line.me/v2/bot/message/push', headers=headers, json=payload)
print(res.status_code, res.text)
          "
